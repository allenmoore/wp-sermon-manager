{"version":3,"sources":["build.admin.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","obj","__esModule","default","init","./components/admin/MediaUploader","2","Object","defineProperty","value","_defineProperties","target","props","descriptor","enumerable","configurable","writable","key","_default","MediaUploader","instance","Constructor","TypeError","_classCallCheck","this","uploadField","document","getElementById","wpsmImgUploader","uploadThumb","uploads","insertObject","bind","deleteObject","openModal","handleEvents","protoProps","staticProps","prototype","_createClass","edit","changed","editLink","id","name","title","src","sizes","thumbnail","url","frame","object","selection","state","get","objects","models","imgEl","createElement","objectData","setMetaData","push","appendChild","objectId","splice","indexOf","remove","preventDefault","_this","wp","media","library","type","multiple","button","text","open","on","addButton","deleteButton","onclick","../../utils","3","getValue","getLength","getModels","setValue","val"],"mappings":"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","file":"build.admin.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nvar _MediaUploader = _interopRequireDefault(require(\"./components/admin/MediaUploader\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mu = new _MediaUploader.default();\nmu.init();\n\n},{\"./components/admin/MediaUploader\":2}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _utils = require(\"../../utils\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar MediaUploader =\n/*#__PURE__*/\nfunction () {\n  /**\n   * The MediaUploader constructor.\n   */\n  function MediaUploader() {\n    _classCallCheck(this, MediaUploader);\n\n    this.uploadField = document.getElementById(wpsmImgUploader.key);\n    this.uploadThumb = document.getElementById('wpsm-image-wrapper');\n    this.uploads = [];\n    this.insertObject = this.insertObject.bind(this);\n    this.deleteObject = this.deleteObject.bind(this);\n    this.openModal = this.openModal.bind(this);\n    this.handleEvents = this.handleEvents.bind(this);\n  }\n  /**\n   * Method to set the metadata of an object.\n   *\n   * @param {Object} obj - The object.\n   *\n   * @returns {Array} - An array of object metadata.\n   */\n\n\n  _createClass(MediaUploader, [{\n    key: \"setMetaData\",\n    value: function setMetaData(obj) {\n      var metaData;\n      metaData = {\n        edit: obj.changed.editLink,\n        id: obj.id,\n        name: obj.changed.title,\n        src: obj.changed.sizes.thumbnail.url\n      };\n      return metaData;\n    }\n    /**\n     * Method to insert an object into the DOM from the WP Media Uploader.\n     *\n     * @param {Object} frame - The WP Media Uploader object.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"insertObject\",\n    value: function insertObject(frame) {\n      var selection = frame.state().get('selection'),\n          length = selection.length,\n          objects = selection.models,\n          imgEl = document.createElement('img');\n      var object,\n          objectData = {};\n\n      for (var i = 0; i < length; i++) {\n        object = objects[i];\n        objectData = this.setMetaData(object);\n        this.uploads.push(objectData);\n        this.uploadField.value = objectData.id;\n        imgEl.src = objectData.src;\n        this.uploadThumb.appendChild(imgEl);\n      }\n    }\n    /**\n     * Method to delete an object.\n     *\n     * @param {Object} e - The event object.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"deleteObject\",\n    value: function deleteObject(e) {\n      var objectId = this.uploadField.value;\n      this.uploads.splice(this.uploads.indexOf(objectId), 1);\n      this.uploadField.value = '';\n      this.uploadThumb.remove();\n      e.preventDefault();\n    }\n    /**\n     * Methos to trigger the WP Media Upload modal.\n     *\n     * @param {Object} e - The event object.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"openModal\",\n    value: function openModal(e) {\n      var _this = this;\n\n      var frame;\n      frame = wp.media({\n        frame: 'post',\n        title: 'Choose an Image',\n        library: {\n          type: 'image'\n        },\n        multiple: false,\n        button: {\n          text: 'Select Image'\n        }\n      });\n      frame.open();\n      frame.on('insert', function () {\n        _this.insertObject(frame);\n      });\n      e.preventDefault();\n    }\n    /**\n     * Method to handle event propagation.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"handleEvents\",\n    value: function handleEvents() {\n      var addButton = document.getElementById('wpsm-add-button');\n      var deleteButton = document.getElementById('wpsm-delete-button');\n      addButton.onclick = this.openModal;\n      deleteButton.onclick = this.deleteObject;\n    }\n    /**\n     * Method to initilize the event listeners.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.handleEvents();\n    }\n  }]);\n\n  return MediaUploader;\n}();\n\nvar _default = MediaUploader;\nexports.default = _default;\n\n},{\"../../utils\":3}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getValue = getValue;\nexports.getLength = getLength;\nexports.getModels = getModels;\nexports.setValue = setValue;\n\n/**\n * Function to get the value of a field object.\n *\n * @param {Object} obj - The field object.\n *\n * @returns {string} - The field object's value.\n */\nfunction getValue(obj) {\n  return obj.value;\n}\n/**\n * Function to get an object's length.\n *\n * @param {Object} obj - The object.\n *\n * @returns {*} - The object's length.\n */\n\n\nfunction getLength(obj) {\n  return obj.length;\n}\n/**\n * Function to get an object's models.\n *\n * @param {Object} obj - The object.\n *\n * @returns {*|[]} - The object's models.\n */\n\n\nfunction getModels(obj) {\n  return obj.models;\n}\n/**\n * Function to set the value of a field object.\n *\n * @param {Object} obj - The field object.\n * @param {string} val - The value to set.\n *\n * @returns {string} - The field object's new value.\n */\n\n\nfunction setValue(obj, val) {\n  obj.value = val;\n  return obj.value;\n}\n\n},{}]},{},[1]);\n\n\n"]}