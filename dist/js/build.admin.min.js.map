{"version":3,"sources":["build.admin.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","obj","__esModule","default","init","./components/admin/MediaUploader","2","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","value","_default","MediaUploader","instance","Constructor","TypeError","_classCallCheck","this","uploadField","document","getElementById","uploadThumb","uploads","insertObject","bind","deleteObject","openModal","handleEvents","protoProps","staticProps","prototype","_createClass","models","val","edit","changed","editLink","id","name","title","src","sizes","thumbnail","url","frame","object","selection","state","get","getLength","objects","getModels","imgEl","createElement","objectData","setMetaData","push","appendChild","objectId","getFieldValue","preventDefault","splice","indexOf","remove","_this","wp","media","library","type","multiple","button","text","open","on","addButton","deleteButton","onclick"],"mappings":"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","file":"build.admin.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nvar _MediaUploader = _interopRequireDefault(require(\"./components/admin/MediaUploader\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mu = new _MediaUploader.default();\nmu.init();\n\n},{\"./components/admin/MediaUploader\":2}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar MediaUploader =\n/*#__PURE__*/\nfunction () {\n  /**\n   * The MediaUploader constructor.\n   */\n  function MediaUploader() {\n    _classCallCheck(this, MediaUploader);\n\n    this.uploadField = document.getElementById('wpsm-upload-id');\n    this.uploadThumb = document.getElementById('wpsm-upload-wrapper');\n    this.uploads = [];\n    this.insertObject = this.insertObject.bind(this);\n    this.deleteObject = this.deleteObject.bind(this);\n    this.openModal = this.openModal.bind(this);\n    this.handleEvents = this.handleEvents.bind(this);\n  }\n  /**\n   * Method to get the value of a field object.\n   *\n   * @param {Object} obj - The field object.\n   *\n   * @returns {string} - The field object's value.\n   */\n\n\n  _createClass(MediaUploader, [{\n    key: \"getValue\",\n    value: function getValue(obj) {\n      return obj.value;\n    }\n    /**\n     * Method to get an object's length.\n     *\n     * @param {Object} obj - The object.\n     *\n     * @returns {*} - The object's length.\n     */\n\n  }, {\n    key: \"getLength\",\n    value: function getLength(obj) {\n      return obj.length;\n    }\n    /**\n     * Method to get an object's models.\n     *\n     * @param {Object} obj - The object.\n     *\n     * @returns {*|[]} - The object's models.\n     */\n\n  }, {\n    key: \"getModels\",\n    value: function getModels(obj) {\n      return obj.models;\n    }\n    /**\n     * Method to set the value of a field object.\n     *\n     * @param {Object} obj - The field object.\n     * @param {string} val - The value to set.\n     *\n     * @returns {string} - The field object's new value.\n     */\n\n  }, {\n    key: \"setValue\",\n    value: function setValue(obj, val) {\n      obj.value = val;\n      return obj.value;\n    }\n    /**\n     * Method to set the metadata of an object.\n     *\n     * @param {Object} obj - The object.\n     *\n     * @returns {Array} - An array of object metadata.\n     */\n\n  }, {\n    key: \"setMetaData\",\n    value: function setMetaData(obj) {\n      var metaData;\n      metaData = {\n        edit: obj.changed.editLink,\n        id: obj.id,\n        name: obj.changed.title,\n        src: obj.changed.sizes.thumbnail.url\n      };\n      return metaData;\n    }\n    /**\n     * Method to insert an object into the DOM from the WP Media Uploader.\n     *\n     * @param {Object} frame - The WP Media Uploader object.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"insertObject\",\n    value: function insertObject(frame) {\n      var selection = frame.state().get('selection'),\n          length = this.getLength(selection),\n          objects = this.getModels(selection),\n          imgEl = document.createElement('img');\n      var object,\n          objectData = {};\n\n      for (var i = 0; i < length; i++) {\n        object = objects[i];\n        objectData = this.setMetaData(object);\n        this.uploads.push(objectData);\n        this.uploadField.value = objectData.id;\n        imgEl.src = objectData.src;\n        this.uploadThumb.appendChild(imgEl);\n      }\n    }\n    /**\n     * Method to delete an object.\n     *\n     * @param {Object} e - The event object.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"deleteObject\",\n    value: function deleteObject(e) {\n      var objectId = this.getFieldValue(this.uploadField);\n      e.preventDefault();\n      this.uploads.splice(this.uploads.indexOf(objectId), 1);\n      this.uploadField.value = '';\n      this.uploadThumb.remove();\n    }\n    /**\n     * Methos to trigger the WP Media Upload modal.\n     *\n     * @param {Object} e - The event object.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"openModal\",\n    value: function openModal(e) {\n      var _this = this;\n\n      var frame;\n      frame = wp.media({\n        frame: 'post',\n        title: 'Choose an Image',\n        library: {\n          type: 'image'\n        },\n        multiple: false,\n        button: {\n          text: 'Select Image'\n        }\n      });\n      frame.open();\n      frame.on('insert', function () {\n        _this.insertObject(frame);\n      });\n      e.preventDefault();\n    }\n    /**\n     * Method to handle event propagation.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"handleEvents\",\n    value: function handleEvents() {\n      var addButton = document.getElementById('wpsm-add-button');\n      var deleteButton = document.getElementById('wpsm-delete-button');\n      addButton.onclick = this.openModal;\n      deleteButton.onclick = this.deleteObject;\n    }\n    /**\n     * Method to initialize the Media Uploader.\n     *\n     * @returns {void}\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.handleEvents();\n    }\n  }]);\n\n  return MediaUploader;\n}();\n\nvar _default = MediaUploader;\nexports.default = _default;\n\n},{}]},{},[1]);\n\n\n"]}